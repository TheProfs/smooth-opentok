<link rel="import" href="../polymer/polymer.html">

<!--
`video-stream`
An individual video stream element

@demo demo/index.html
-->

<dom-module id="video-stream">
  <template>
    <style>
      :host {
        position: relative;
        display: inline-block;
        border: 2px solid red;
      }

      #screenshare,
      #video {
        width: 100%;
        height: 100%;
      }
    </style>

      <video
        id="screenshare"
        autoplay="true"
        playsinline="true"
        draggable="true"
        hidden$="[[!user.streams.screen]]">
        Sorry, Web RTC is not available in your browser
      </video>

      <video
        id="video"
        autoplay="true"
        playsinline="true"
        draggable="true"
        hidden$="[[user.streams.screen]]">
        Sorry, Web RTC is not available in your browser
      </video>
    </div>
  </template>

  <script>
    Polymer({

      is: 'video-stream',

      properties: {
        user: {
          type: Object
        }
      },

      ready: function() {

      },

      observers: [
        '_toggleScreenshare(user.streams.screen.srcObject)',
        '_toggleCamera(user.streams.camera.srcObject)'
      ],

      _toggleScreenshare: function(srcObject) {
        if (!srcObject) return

        this.$.screenshare.srcObject = srcObject
      },

      _toggleCamera: function(srcObject) {
        if (!srcObject) return

        this.$.video.srcObject = srcObject
      }
    })
  </script>
</dom-module>
